(function(e){function t(t){for(var a,s,o=t[0],c=t[1],l=t[2],m=0,d=[];m<o.length;m++)s=o[m],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&d.push(i[s][0]),i[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==i[c]&&(a=!1)}a&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var a={},i={app:0},r=[];function s(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=a,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(n,a,function(t){return e[t]}.bind(null,a));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/meeting-planner/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"15ea":function(e,t,n){"use strict";var a=n("ea16"),i=n.n(a);i.a},"4f17":function(e,t,n){"use strict";var a=n("5d1c"),i=n.n(a);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-content",[n("MeetingPlaner")],1)],1)},r=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs3:""}},[n("v-layout",{attrs:{row:"",wrap:"","user-list":""}},[n("v-flex",{attrs:{xs12:""}},[e._v(" Список пользователей: ")]),n("v-flex",{attrs:{xs12:""}},e._l(e.userList_get,(function(t){return n("div",{staticClass:"user-card"},[n("h3",[e._v(e._s(t.name+" "+t.surname))])])})),0),n("v-flex",{attrs:{xs12:"","button-box":""}},[n("v-btn",{attrs:{fab:"",dark:"",color:"indigo"},on:{click:function(t){e.newUserDialog=!0}}},[n("v-icon",{attrs:{dark:""}},[e._v("mdi-plus")])],1)],1)],1)],1),n("v-flex",{attrs:{xs9:""}},[n("v-flex",{attrs:{xs12:""}},[n("v-btn",{staticClass:"mx-2",attrs:{block:"",dark:"",color:"indigo"},on:{click:function(t){e.meetingEditor=!0}}},[e._v(" Добавить встречу ")])],1),n("v-flex",{attrs:{xs12:""}},[n("v-layout",{attrs:{row:"",wrap:""}},e._l(e.meetingList_get,(function(e){return n("v-flex",{attrs:{xs3:""}},[n("MeetingCard",{attrs:{meeting:e}})],1)})),1)],1)],1)],1),e.newUserDialog?n("UserEditor",{on:{cancel:function(t){e.newUserDialog=!1},createUser:e.createUser}}):e._e(),e.meetingEditor?n("MeetingEditor",{attrs:{users:e.userList_get,userDisabled:e.userDisabled},on:{cancel:function(t){e.meetingEditor=!1,e.userDisabled=[]},createMeeting:e.createMeeting,checkAvailability:e.checkAvailability}}):e._e()],1)},o=[],c=(n("a4d3"),n("4de4"),n("e439"),n("dbb4"),n("b64b"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("2909")),l=n("ade3"),u=n("2f62"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-container"},[n("div",{staticClass:"overlay",on:{click:function(t){return e.$emit("cancel")}}}),n("div",{staticClass:"user-editor-container"},[n("h3",[e._v("Добавить пользователя:")]),n("div",{staticClass:"column"},[n("label",{attrs:{for:"name"}},[e._v("Имя:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],attrs:{name:"name",type:"text"},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}})]),n("div",{staticClass:"column"},[n("label",{attrs:{for:"surname"}},[e._v("Фамилия:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.surname,expression:"user.surname"}],attrs:{name:"surname",type:"text"},domProps:{value:e.user.surname},on:{input:function(t){t.target.composing||e.$set(e.user,"surname",t.target.value)}}})]),n("div",{staticClass:"row"},[n("v-btn",{on:{click:function(t){return e.$emit("createUser",e.user)}}},[e._v("Создать")]),n("v-btn",{on:{click:function(t){return e.$emit("cancel")}}},[e._v("Отмена")])],1)])])},d=[],p={name:"UserEditor",data:function(){return{user:{name:"",surname:""}}}},g=p,v=(n("5b03"),n("2877")),f=n("6544"),b=n.n(f),y=n("8336"),h=Object(v["a"])(g,m,d,!1,null,"3e3336c0",null),_=h.exports;b()(h,{VBtn:y["a"]});var w=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-container"},[n("div",{staticClass:"overlay",on:{click:function(t){return e.$emit("cancel")}}}),n("div",{staticClass:"user-editor-container"},[n("h3",[e._v("Создать встречу:")]),n("div",{staticClass:"column"},[n("label",{attrs:{for:"title"}},[e._v("Тема:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.meeting.title,expression:"meeting.title"}],attrs:{name:"title",type:"text"},domProps:{value:e.meeting.title},on:{input:function(t){t.target.composing||e.$set(e.meeting,"title",t.target.value)}}})]),n("div",{staticClass:"column"},[n("label",{attrs:{for:"time"}},[e._v("Начало в:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.meeting.timeFrom,expression:"meeting.timeFrom"}],attrs:{name:"time",type:"datetime-local"},domProps:{value:e.meeting.timeFrom},on:{change:e.checkAvailability,input:function(t){t.target.composing||e.$set(e.meeting,"timeFrom",t.target.value)}}})]),n("div",{staticClass:"column"},[n("label",{attrs:{for:"time"}},[e._v("Конец в:")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.meeting.timeTo,expression:"meeting.timeTo"}],attrs:{name:"time",type:"datetime-local",min:e.meeting.timeFrom},domProps:{value:e.meeting.timeTo},on:{change:e.checkAvailability,input:function(t){t.target.composing||e.$set(e.meeting,"timeTo",t.target.value)}}})]),n("div",{staticClass:"column"},[n("label",{attrs:{for:"type"}},[e._v("Участники:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.meeting.participants,expression:"meeting.participants"}],attrs:{name:"type",multiple:""},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.meeting,"participants",t.target.multiple?n:n[0])}}},[n("option",{attrs:{disabled:"",value:""}},[e._v("Выберите участников")]),e._l(e.users,(function(t){return n("option",{attrs:{disabled:e.userDisabled.some((function(e){return e.id===t.id}))},domProps:{value:t}},[e._v(" "+e._s(t.name+" "+t.surname)+" ")])}))],2)]),n("div",{staticClass:"column"},[n("label",{attrs:{for:"facilitator"}},[e._v("Фасилитатор:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.meeting.facilitator,expression:"meeting.facilitator"}],attrs:{name:"facilitator"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.meeting,"facilitator",t.target.multiple?n:n[0])}}},[n("option",{attrs:{disabled:"",value:""}},[e._v("Выбрать участника:")]),e._l(e.meeting.participants,(function(t){return n("option",{attrs:{disabled:!!e.meeting.secretary&&e.meeting.secretary.id===t.id},domProps:{value:t}},[e._v(" "+e._s(t.name+" "+t.surname)+" ")])}))],2)]),n("div",{staticClass:"column"},[n("label",{attrs:{for:"secretary"}},[e._v("Секретарь:")]),n("select",{directives:[{name:"model",rawName:"v-model",value:e.meeting.secretary,expression:"meeting.secretary"}],attrs:{name:"secretary"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.meeting,"secretary",t.target.multiple?n:n[0])}}},[n("option",{attrs:{disabled:"",value:""}},[e._v("Выбрать участника:")]),e._l(e.meeting.participants,(function(t){return n("option",{attrs:{disabled:!!e.meeting.facilitator&&e.meeting.facilitator.name===t.name},domProps:{value:t}},[e._v(" "+e._s(t.name+" "+t.surname)+" ")])}))],2)]),n("div",{staticClass:"row"},[n("v-btn",{on:{click:function(t){return e.$emit("createMeeting",e.meeting)}}},[e._v("Создать")]),n("v-btn",{on:{click:function(t){return e.$emit("cancel")}}},[e._v("Отмена")])],1)])])},O=[],x={name:"MeetingEditor",data:function(){return{meeting:{timeFrom:null,title:"",participants:[],timeTo:null,facilitator:null,secretary:null}}},props:["users","userDisabled"],methods:{checkAvailability:function(){this.meeting.timeFrom>this.meeting.timeTo&&(this.meeting.timeTo=this.meeting.timeFrom),this.meeting.timeFrom&&this.meeting.timeTo&&this.$emit("checkAvailability",this.meeting.timeFrom,this.meeting.timeTo)}},beforeUpdate:function(){var e=this;this.userDisabled.length>0&&(this.meeting.participants=this.meeting.participants.filter((function(t){return!e.userDisabled.some((function(e){return e.id===t.id}))})))}},L=x,D=(n("15ea"),Object(v["a"])(L,w,O,!1,null,"51499727",null)),S=D.exports;b()(D,{VBtn:y["a"]});var j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"meeting-card"},[n("h2",[e._v(" "+e._s(e.meeting.title)+" ")]),n("div",{staticClass:"meeting-time"},[e._v(" "+e._s(e.getMeetingTime)+" ")]),n("div",{staticClass:"meeting-status column",class:e.status},[e._v(" "+e._s(e.getMeetingStatus)+" ")]),n("div",{staticClass:"meeting-participants column"},e._l(e.meeting.participants,(function(t){return n("div",{staticClass:"meeting-participant column"},[e._v(" "+e._s(t.name+" "+t.surname)+" ")])})),0)])},k=[],C=(n("99af"),{name:"MeetingCard",data:function(){return{status:""}},props:["meeting"],computed:{getMeetingTime:function(){var e={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"},t=new Date(this.meeting.timeFrom),n=new Date(this.meeting.timeTo);return"".concat(t.toLocaleDateString("ru-RU",e)," - ").concat(n.toLocaleDateString("ru-RU",e))},getMeetingStatus:function(){var e=new Date,t=new Date(this.meeting.timeFrom),n=new Date(this.meeting.timeTo);return t<e&&n<e?(this.status="ended","Завершена"):t<e&&n>e?(this.status="going","Проходит"):t>e&&n>e?(this.status="planned","Запланирована"):void 0}}}),M=C,P=Object(v["a"])(M,j,k,!1,null,"a2eb97bc",null),U=P.exports;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $={name:"MeetingPlaner",data:function(){return{newUserDialog:!1,meetingEditor:!1,userDisabled:[]}},computed:F({},Object(u["c"])(["userList_get","meetingList_get"])),components:{UserEditor:_,MeetingEditor:S,MeetingCard:U},methods:F({},Object(u["b"])(["createNewUser","createNewMeeting","updateDataFromStorage"]),{createUser:function(e){this.createNewUser({payload:e}),this.newUserDialog=!1},createMeeting:function(e){e.facilitator&&e.secretary?e.timeFrom>e.timeTo?alert("Время начала не может быть больше чем окончание встречи"):(this.createNewMeeting({payload:e}),this.meetingEditor=!1,this.userDisabled=[]):alert("Заполните роль фасилитатора и секретаря, прежде чем создать встречу")},checkAvailability:function(e,t){var n=this,a=new Set;this.meetingList_get.forEach((function(i){(i.timeFrom>=e&&i.timeFrom<=t||i.timeTo>=e&&i.timeTo<=t||i.timeFrom<e&&i.timeTo>t)&&i.participants.forEach((function(e){return a.add(e)})),n.userDisabled=Object(c["a"])(a)}))},getStorageUpdate:function(e){"userList"!==event.key&&"meetingList"!==event.key||this.updateDataFromStorage({payload:{key:event.key,data:JSON.parse(event.newValue)}})}}),mounted:function(){localStorage.getItem("userList")&&this.updateDataFromStorage({payload:{key:"userList",data:JSON.parse(localStorage.getItem("userList"))}}),localStorage.getItem("meetingList")&&this.updateDataFromStorage({payload:{key:"meetingList",data:JSON.parse(localStorage.getItem("meetingList"))}}),window.addEventListener("storage",this.getStorageUpdate)},beforeDestroy:function(){window.removeEventListener("storage",this.getStorageUpdate)}},T=$,N=(n("4f17"),n("a523")),A=n("0e8f"),V=n("132d"),I=n("a722"),J=Object(v["a"])(T,s,o,!1,null,null,null),B=J.exports;b()(J,{VBtn:y["a"],VContainer:N["a"],VFlex:A["a"],VIcon:V["a"],VLayout:I["a"]});var G={name:"App",components:{MeetingPlaner:B},data:function(){return{}}},R=G,q=n("7496"),z=n("a75b"),H=Object(v["a"])(R,i,r,!1,null,null,null),K=H.exports;b()(H,{VApp:q["a"],VContent:z["a"]});var Q,W,X=n("8c4f"),Y={},Z=Object(v["a"])(Y,Q,W,!1,null,null,null),ee=Z.exports;a["a"].use(X["a"]);var te=[{path:"/",name:"home",component:ee}],ne=new X["a"]({routes:te}),ae=ne;a["a"].use(u["a"]);var ie=new u["a"].Store({state:{userList:[],meetingList:[]},mutations:{newUserAdd_add:function(e,t){var n=t.payload;e.userList.push(n),localStorage.setItem("userList",JSON.stringify(e.userList))},newMeeting_add:function(e,t){var n=t.payload;e.meetingList.push(n),localStorage.setItem("meetingList",JSON.stringify(e.meetingList))},userList_set:function(e,t){var n=t.payload;e.userList=n},meetingList_set:function(e,t){var n=t.payload;e.meetingList=n}},actions:{createNewUser:function(e,t){var n=e.state,a=e.commit,i=(e.dispatch,e.getters,e.rootGetters,t.payload);i.id=n.userList.length+1,a("newUserAdd_add",{payload:i})},createNewMeeting:function(e,t){var n=e.state,a=e.commit,i=(e.dispatch,e.getters,e.rootGetters,t.payload);i.id=n.meetingList.length+1,a("newMeeting_add",{payload:i})},updateDataFromStorage:function(e,t){e.state;var n=e.commit,a=(e.dispatch,e.getters,e.rootGetters,t.payload),i=a.data,r=a.key;"userList"===r?n("userList_set",{payload:i}):"meetingList"===r&&n("meetingList_set",{payload:i})}},modules:{},getters:{userList_get:function(e){return e.userList},meetingList_get:function(e){return e.meetingList}}}),re=n("f309");a["a"].use(re["a"]);var se=new re["a"]({});a["a"].config.productionTip=!1,new a["a"]({router:ae,store:ie,vuetify:se,render:function(e){return e(K)}}).$mount("#app")},"5b03":function(e,t,n){"use strict";var a=n("79a1"),i=n.n(a);i.a},"5d1c":function(e,t,n){},"79a1":function(e,t,n){},ea16:function(e,t,n){}});
//# sourceMappingURL=app.7154525e.js.map