{"remainingRequest":"/Users/liza/Desktop/testovoe/Testovoe/meeting-planner/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liza/Desktop/testovoe/Testovoe/meeting-planner/src/components/MeetingPlaner.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/liza/Desktop/testovoe/Testovoe/meeting-planner/src/components/MeetingPlaner.vue","mtime":1575886891683},{"path":"/Users/liza/Desktop/testovoe/Testovoe/meeting-planner/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liza/Desktop/testovoe/Testovoe/meeting-planner/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/liza/Desktop/testovoe/Testovoe/meeting-planner/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/liza/Desktop/testovoe/Testovoe/meeting-planner/node_modules/vuetify-loader/lib/loader.js","mtime":1574476662000},{"path":"/Users/liza/Desktop/testovoe/Testovoe/meeting-planner/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liza/Desktop/testovoe/Testovoe/meeting-planner/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubWVldGluZy1jYXJkIHsKICBiYWNrZ3JvdW5kOiAjRkZGNEFBOwogIGJveC1zaGFkb3c6IDBweCAxcHggMnB4IHJnYmEoMCwgMCwgMCwgMC4yKTsKICBib3JkZXItcmFkaXVzOiAzcHg7CiAgbWFyZ2luOiAxMHB4OwogIHBhZGRpbmc6MTBweDsKfQoKLm1lZXRpbmctdGltZSB7CiAgZm9udC13ZWlnaHQ6IDMwMDsKICBmb250LXNpemU6IDEycHg7CiAgbGluZS1oZWlnaHQ6IDE0cHg7Cn0KCi5tZWV0aW5nLXN0YXR1cy5wbGFubmVkIHsKICBjb2xvcjogIzE1NjcxMQp9CgoubWVldGluZy1zdGF0dXMuZW5kZWQgewogIGNvbG9yOiAjODAxNTE1Cn0KCi5tZWV0aW5nLXN0YXR1cy5nb2luZyB7CiAgY29sb3I6ICMxNTJDNTUKfQoKLmJ1dHRvbi1ib3ggewogIG1hcmdpbi10b3A6IDIwcHg7Cn0K"},{"version":3,"sources":["MeetingPlaner.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"MeetingPlaner.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-container>\n    <v-layout row wrap>\n      <v-flex xs3>\n        <v-layout row wrap user-list>\n          <v-flex xs12>\n            Список пользователей:\n          </v-flex>\n          <v-flex xs12>\n            <div class='user-card' v-for='el in userList_get'>\n              <h3>{{ el.name + ' ' + el.surname }}</h3>\n            </div>\n          </v-flex>\n          <v-flex xs12 button-box>\n            <v-btn fab dark color=\"indigo\" @click='newUserDialog = true'>\n              <v-icon dark>mdi-plus</v-icon>\n            </v-btn>\n          </v-flex>\n        </v-layout>\n      </v-flex>\n      <v-flex xs9>\n        <v-flex xs12>\n          <v-btn class=\"mx-2\" block dark color=\"indigo\" @click='meetingEditor = true'>\n            Добавить встречу\n          </v-btn>\n        </v-flex>\n        <v-flex xs12>\n          <v-layout row wrap>\n            <v-flex xs3 v-for='el in meetingList_get'>\n              <MeetingCard :meeting='el'/>\n            </v-flex>\n          </v-layout>\n        </v-flex>\n      </v-flex>\n    </v-layout>\n    <UserEditor v-if='newUserDialog'\n                @cancel='newUserDialog = false'\n                @createUser='createUser'/>\n    <MeetingEditor v-if='meetingEditor'\n                   :users='userList_get'\n                   :userDisabled='userDisabled'\n                   @cancel='meetingEditor = false, userDisabled = []'\n                   @createMeeting='createMeeting'\n                   @checkAvailability='checkAvailability'/>\n  </v-container>\n</template>\n\n<script>\nimport { mapActions, mapGetters } from 'vuex';\nimport UserEditor from './UserEditor.vue';\nimport MeetingEditor from './MeetingEditor.vue';\nimport MeetingCard from './MeetingCard.vue';\n\nexport default {\n  name: 'MeetingPlaner',\n\n  data: () => ({\n    newUserDialog: false,\n    meetingEditor: false,\n    userDisabled: [],\n  }),\n  computed: {\n    ...mapGetters([\n      'userList_get',\n      'meetingList_get'\n    ]),\n  },\n  components: {\n    UserEditor,\n    MeetingEditor,\n    MeetingCard\n  },\n  methods: {\n    ...mapActions([\n      'createNewUser',\n      'createNewMeeting',\n      'updateDataFromStorage'\n    ]),\n    createUser(user) {\n      this.createNewUser({ payload: user })\n      this.newUserDialog = false;\n    },\n    createMeeting(meeting){\n      if (!meeting.facilitator||!meeting.secretary) {\n        alert('Заполните роль фасилитатора и секретаря, прежде чем создать встречу');\n        return;\n      } else if (meeting.timeFrom > meeting.timeTo) {\n        alert('Время начала не может быть больше чем окончание встречи');\n        return;\n      } else {\n        this.createNewMeeting({ payload: meeting })\n        this.meetingEditor = false;\n        this.userDisabled = [];\n      }\n\n    },\n    checkAvailability(timeFrom, timeTo) {\n      const set = new Set();\n      this.meetingList_get.forEach(el => {\n        if ((el.timeFrom >= timeFrom&&el.timeFrom <= timeTo)||(el.timeTo >= timeFrom&& el.timeTo <= timeTo)||(el.timeFrom < timeFrom&&el.timeTo > timeTo)) {\n          el.participants.forEach(part => set.add(part))\n        }\n      this.userDisabled = [...set]\n      })\n    },\n    getStorageUpdate(e) {\n      if (event.key === 'userList'||event.key === 'meetingList') this.updateDataFromStorage({ payload: { key: event.key, data: JSON.parse(event.newValue)} })\n    }\n  },\n\n  mounted(){\n    if (localStorage.getItem('userList')) this.updateDataFromStorage({ payload: { key: 'userList', data: JSON.parse(localStorage.getItem('userList'))} })\n    if (localStorage.getItem('meetingList')) this.updateDataFromStorage({ payload: { key: 'meetingList', data: JSON.parse(localStorage.getItem('meetingList'))} })\n    window.addEventListener('storage', this.getStorageUpdate);\n  },\n  beforeDestroy(){\n    window.removeEventListener('storage', this.getStorageUpdate);\n  }\n};\n</script>\n\n<style>\n.meeting-card {\n  background: #FFF4AA;\n  box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.2);\n  border-radius: 3px;\n  margin: 10px;\n  padding:10px;\n}\n\n.meeting-time {\n  font-weight: 300;\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.meeting-status.planned {\n  color: #156711\n}\n\n.meeting-status.ended {\n  color: #801515\n}\n\n.meeting-status.going {\n  color: #152C55\n}\n\n.button-box {\n  margin-top: 20px;\n}\n</style>\n"]}]}